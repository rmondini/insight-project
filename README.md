# Hotel Review Analyzer  

### PROBLEM STATEMENT

When searching for hotels, travelers weigh negative reviews more than all other factors (including price) and it is estimated that hotels can lose as much as 20% of bookings due to negative reviews. Hotel managers need to quickly identify the topics negatively discussed in reviews and address those issues. Reducing the number of negative reviews in turn allows managers to raise room prices.  

### SOLUTION

I built an interactive web app that helps hotel managers  
1. Quantify how much each specific topic is affecting room prices
2. Predict by how much room prices can be increased in the absence of negative reviews.  

The web app is hosted on AWS and can be found at [www.hotelreviewanalyzer.xyz](http://www.hotelreviewanalyzer.xyz:8050).  

### REPOSITORY STRUCTURE

The directory structure of this repository is the following:

    ├── README.md
    ├── input
    │   └── ...
    ├── input_app
    │   └── ...
    ├── output
    │   └── ...
    ├── src
    │   └── p0_booking_reviews_scraping.py
    │   └── p1_reviews_preprocessing.py
    │   └── reviews_preprocessing_util.py
    │   └── p2_reviews_topic_extraction.py
    │   └── p3_price_prediction.py
    │   └── price_prediction_util.py
    ├── src_app
    │   └── local_app.py

The code is written in Python and organized as follows.  

In the `src` folder:
- `p0_booking_reviews_scraping.py` contains the code needed to scrape reviews and detailed information (name, location, stars, ratings, room price) for all the hotels in the state of New York from booking.com.
- `p1_reviews_preprocessing.py` performs the initial text cleaning and pre-processing on the review dataset.
- `p2_reviews_topic_extraction.py` performs topic extraction on the negative reviews using soft cosine similarity between review sentences and an identified set of topics.
- `p3_price_prediction.py` is where I built a linear regression model that predicts the room price for each hotel based on the number of negative sentences per topic and hotel features such as location, stars, and ratings.
- `reviews_preprocessing_util.py` and `price_prediction_util.py` contain the definitions of modular functions needed in the other files.  
  
In the `src_app` folder:
- `local_app.py` builds a local version of the interactive web app using Plotly and Dash.  

<> There are two folders in this repository:
<> - `input_app` includes all the input files needed to build the interactive web app. More specifically, the `.sav` files contain the pickled regression model and other necessary parameters, while the `.csv` file contains the complete hotel dataset used to train the regression model. All these files are generated in `p3-price-prediction.ipynb`.
<> - `datasets` contains the files generated in `p0-booking-reviews-scraping.ipynb` and needed by other notebooks. It also contains the manually-annotated dataset needed in `p2-reviews-topic-extraction.ipynb`.  

### HOW TO RUN THE CODE

The code uses the following external libraries: `BeautifulSoup, Numpy, Pandas, Nltk, Gensim, Scikit-Learn, Plotly, Dash` which therefore need to be installed before running the code.  

The code can be executed by running the command  
`insight-project~$ ./run.sh`  
and a location version of the web app can be built by running  
`insight-project~$ python ./src_app/local_app.py`  

Since scraping all the reviews and hotel information from booking.com website takes a few hours in total, in order to save the user time the hotel room price and review datasets generated by running `p0_booking_reviews_scraping.py` have already been included in the `input` folder (so that the user can comment out the first line in `run.sh` and avoid running `p0_booking_reviews_scraping.py`).



